<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Why I moved to Angular Dart - Part 1 | MF Dev</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="You know how it goes, you’ve finally (but probably haven’t) mastered your tech stack, you know the ins and outs of your chosen languages, frameworks. Found work-arounds for all those little niggly bit">
<meta name="keywords" content="Angular,Dart,TypeScript">
<meta property="og:type" content="article">
<meta property="og:title" content="Why I moved to Angular Dart - Part 1">
<meta property="og:url" content="https://github.com/Dudecor3/2019/07/12/Angular-vs-Angular-Dart/index.html">
<meta property="og:site_name" content="MF Dev">
<meta property="og:description" content="You know how it goes, you’ve finally (but probably haven’t) mastered your tech stack, you know the ins and outs of your chosen languages, frameworks. Found work-arounds for all those little niggly bit">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-07-12T09:20:38.330Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Why I moved to Angular Dart - Part 1">
<meta name="twitter:description" content="You know how it goes, you’ve finally (but probably haven’t) mastered your tech stack, you know the ins and outs of your chosen languages, frameworks. Found work-arounds for all those little niggly bit">
  
    <link rel="alternate" href="/mf-blog/atom.xml" title="MF Dev" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/mf-blog/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/mf-blog/" id="logo">MF Dev</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/mf-blog/" id="subtitle">my random ramblings</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/mf-blog/">Home</a>
        
          <a class="main-nav-link" href="/mf-blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/mf-blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/Dudecor3"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Angular-vs-Angular-Dart" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/mf-blog/2019/07/12/Angular-vs-Angular-Dart/" class="article-date">
  <time datetime="2019-07-12T07:44:53.000Z" itemprop="datePublished">2019-07-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Why I moved to Angular Dart - Part 1
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>You know how it goes, you’ve finally (but probably haven’t) mastered your tech stack, you know the ins and outs of your chosen languages, frameworks. Found work-arounds for all those little niggly bits only for a colleague or friend to turn round and say “Have you heard of ‘x’, it’s amazing!”. </p>
<p>For me, this was “Have you heard of Angular Dart? Google use it internally to get around the problems with AngularTS”… </p>
<p>I love Angular with TypeScript, I’m very much a fan boy at this point and I get to use it at work almost every single day, but I have been thinking a lot about TS recently; how it still inherits JavaScript’s problems and adds more complexity to the already insane eco system that JavaScript is, but discussing JS’s flaws could take up an entire post of its own… Anyway, I decided to take a look at Angular Dart and I’ll now compare my experience with Angular TS. </p>
<p>NOTE: I was originally going to do this in one post, but as I started adding more to it I realised this is a very big subject… I will spread it over 3 parts instead.</p>
<h1 id="TLDR"><a href="#TLDR" class="headerlink" title="TLDR;"></a>TLDR;</h1><p>I switched over to Angular Dart because I want to see what else is out there. TypeScript is great but is “polishing a turd” in the sense that JavaScript is inherintly flawed, and all TS does is throw a (albeit extremely well created) wrapper around JS.<br>Dart is amazing. Angular Dart is amazing. It doesn’t feel stiched together like Angular TS, there’s nowhere near as many package installs and creates a natural development experience. <a href="https://angulardart.dev/" target="_blank" rel="noopener">GIVE IT A GO!</a></p>
<h1 id="Dart-is-actually…-Awesome"><a href="#Dart-is-actually…-Awesome" class="headerlink" title="Dart is actually… Awesome!!"></a>Dart is actually… Awesome!!</h1><p>So I started looking into Dart and was hooked almost instantly. A language with optional static typing? Object Oriented paradigms but full support for functional programming? Single Inheritence? Generics? It already has everything that TypeScript has but it’s built into the language. It almost sounded like TypeScript but feels a little more natural. Consider this piece of statically typed code in Dart: </p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">    <span class="built_in">String</span> field1;</span><br><span class="line">    <span class="built_in">String</span> field2;</span><br><span class="line"></span><br><span class="line">    MyClass(<span class="keyword">this</span>.field1, <span class="keyword">this</span>.field2); <span class="comment">// Inline constructors? Go on then :D</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Simple enough, we’ve declared a Dart class called MyClass, declared to public fields and then used our inline constructor to assign their values. Because static typing is optional, we can also write the class like this: </p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> field1;</span><br><span class="line">    <span class="keyword">final</span> field2;</span><br><span class="line"></span><br><span class="line">    MyClass(<span class="keyword">this</span>.field1, <span class="keyword">this</span>.field2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Yayyyyyy, they’re both valid. I like this, it means that I can prototype something really quickly if I need to. Another massive positive for me (and other developers who use Dart) is that it is so easy to be productive, quickly. I already felt like I knew how to write Dart.</p>
<p>This isn’t to say that Dart doesn’t have things that niggle me, every language has its flaws.</p>
<h1 id="Angular"><a href="#Angular" class="headerlink" title="Angular"></a>Angular</h1><p>So being completely sold by Dart and all it’s offerings, I decided to go and download the Dart SDK and all the packages I needed to get a project up and running.</p>
<h2 id="package-management"><a href="#package-management" class="headerlink" title="package management"></a>package management</h2><p>This wasn’t actually too bad. Unlike AngularTS that uses a package.json and NPM to manage packages, Angular Dart uses a file called pubspec.yaml which looks like this: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">name: music_portal</span><br><span class="line">description: Music Portal</span><br><span class="line">version: 0.0.1</span><br><span class="line">environment:</span><br><span class="line">  sdk: &apos;&gt;=2.2.0 &lt;3.0.0&apos;</span><br><span class="line"></span><br><span class="line">dependencies:</span><br><span class="line">  http: ^0.12.0</span><br><span class="line">  angular: ^6.0.0-alpha</span><br><span class="line">  angular_router: ^2.0.0-alpha+22</span><br><span class="line">  angular_forms: ^2.0.0</span><br><span class="line">  angular_components: any</span><br><span class="line">  json_serializable: ^3.0.0</span><br><span class="line"></span><br><span class="line">dev_dependencies:</span><br><span class="line">  build_runner: ^1.5.1</span><br><span class="line">  build_test: ^0.10.8</span><br><span class="line">  build_web_compilers: ^2.1.0</span><br><span class="line">  test: ^1.6.4</span><br><span class="line">  sass_builder: ^2.0.0</span><br></pre></td></tr></table></figure>
<p>One thing I liked about package management in Angular Dart is that it only contains packages that you (the developer) needs. Most things like stream libraries are built into the language itself, meaning no more “stiching” Angular together with multiple technologies, pretty much everything comes out of the box. </p>
<h2 id="API-calls"><a href="#API-calls" class="headerlink" title="API calls"></a>API calls</h2><p>Hahaha here we go, this is where things started to get really interesting. One thing us JS and TS devs take for granted all the while is that JSON is a natural part of the language, we can call a server with JSON, and get a response back in JSON and we don’t need to do anything else… Dart on the other hand, you don’t have so much luck. If we want to instantiate a class from a server response, we need to make the class serializable. This really threw me off but again, Dart has your back with a built in (and fairly well documented) JSON library, so with a tiny bit of code and reading, this is my solution for making Dart classes JSON friendly. </p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a class that hits an authentication endpoint.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserAuthApi</span> <span class="keyword">implements</span> <span class="title">IUserAuthApi</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> BrowserClient _http;</span><br><span class="line"></span><br><span class="line">    Future&lt;ApiResponse&lt;AuthenticationResponse&gt;&gt; authenticateUser(LoginRequest loginRequest) &#123;</span><br><span class="line">        <span class="keyword">final</span> response = <span class="keyword">await</span> <span class="keyword">this</span>._http.post(<span class="string">'<span class="subst">$&#123;ApiHelper.apiUrl&#125;</span>/auth/authenticate'</span>,</span><br><span class="line">        headers: ApiHelper.headers,</span><br><span class="line">        body: jsonEncode(loginRequest));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> loginResponse = MusicPortalApiResponse&lt;MusicPortalAuthenticationResponse&gt;.fromJson(jsonDecode(response.body)); <span class="comment">// &lt;-- the fromJson method is where the magic happens</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> loginResponse</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:json_annotation/json_annotation.dart'</span>; <span class="comment">// &lt;-- Dart's JSON library</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:music_portal/src/api/helpers/json_convert.dart'</span>; <span class="comment">// &lt;-- custom JSON converter for use with generic types</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">part</span> <span class="string">'api_response.g.dart'</span> <span class="comment">// &lt;-- this is actually generated by Dart's JSON library.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@JsonSerializable</span>()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ApiResponse</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonKey</span>(name: <span class="string">"data"</span>)</span><br><span class="line">    <span class="meta">@JsonConvert</span>()</span><br><span class="line">    T data;</span><br><span class="line">    <span class="built_in">String</span> message;</span><br><span class="line">    <span class="built_in">String</span> authToken;</span><br><span class="line">    <span class="built_in">bool</span> hasError;</span><br><span class="line"></span><br><span class="line">    MusicPortalApiResponse(<span class="keyword">this</span>.data, <span class="keyword">this</span>.message, <span class="keyword">this</span>.authToken, <span class="keyword">this</span>.hasError);</span><br><span class="line">    <span class="keyword">factory</span> MusicPortalApiResponse.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt; _$MusicPortalApiResponseFromJson(json);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Notice the factory? Dart encourages the Factory pattern right in the core of it’s <a href="https://sites.google.com/site/dartlangexamples/learn/class/constructors/factory-constructor" target="_blank" rel="noopener">language</a>. This factory is responsible for taking a JSON blob and mapping it to the ApiResponse. Although I soon hit another issue, because data is a generic field, the compiler couldn’t create <t> from JSON because it’s type isn’t known at compile time. This is where the @JsonConvert annotation comes in: </t></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:json_annotation/json_annotation.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:music_portal/src/types/api_response/auth_response.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JsonConvert</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">JsonConverter</span>&lt;<span class="title">T</span>, <span class="title">Object</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> JsonConvert();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  T fromJson(<span class="built_in">Object</span> json) &#123;</span><br><span class="line">    <span class="keyword">if</span>(json <span class="keyword">is</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; &amp;&amp; json.containsKey(<span class="string">"userId"</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> MusicPortalAuthenticationResponse.fromJson(json) <span class="keyword">as</span> T;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">Object</span> toJson(T object) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement toJson</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now this feels a bit hacky, but it works. I’ll have to work on cleaning this up as more types are used with the ApiResponse class. </p>
<p>That’s it for part 1, I feel like this post is going on for far too long. I’ll update with post 2 soon… </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/Dudecor3/2019/07/12/Angular-vs-Angular-Dart/" data-id="cjxzwfy0h0000dsuz2hvhuowk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/mf-blog/tags/Angular/">Angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/mf-blog/tags/Dart/">Dart</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/mf-blog/tags/TypeScript/">TypeScript</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/mf-blog/2019/05/05/how-primitive-obsession-can-be-an-anti-pattern/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">How Primitive Obsession can be an Anti-Pattern</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/mf-blog/tags/Angular/">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/mf-blog/tags/Dart/">Dart</a></li><li class="tag-list-item"><a class="tag-list-link" href="/mf-blog/tags/TypeScript/">TypeScript</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/mf-blog/tags/Angular/" style="font-size: 10px;">Angular</a> <a href="/mf-blog/tags/Dart/" style="font-size: 10px;">Dart</a> <a href="/mf-blog/tags/TypeScript/" style="font-size: 10px;">TypeScript</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/mf-blog/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/mf-blog/archives/2019/05/">May 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/mf-blog/2019/07/12/Angular-vs-Angular-Dart/">Why I moved to Angular Dart - Part 1</a>
          </li>
        
          <li>
            <a href="/mf-blog/2019/05/05/how-primitive-obsession-can-be-an-anti-pattern/">How Primitive Obsession can be an Anti-Pattern</a>
          </li>
        
          <li>
            <a href="/mf-blog/2019/05/01/my-first-two-years-as-a-dev/">My First 2 Years as a Software Developer</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Marc Freeman<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/mf-blog/" class="mobile-nav-link">Home</a>
  
    <a href="/mf-blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/mf-blog/fancybox/jquery.fancybox.css">
  <script src="/mf-blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/mf-blog/js/script.js"></script>



  </div>
</body>
</html>